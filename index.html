<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Validator by flikore</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Validator</h1>
          <h2>A simple validation library in PHP</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/flikore/validator/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/flikore/validator/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/flikore/validator" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a name="flikore-validator" class="anchor" href="#flikore-validator"><span class="octicon octicon-link"></span></a>Flikore Validator</h1>

<p><em>A simple validation library</em>.</p>

<p><a href="https://travis-ci.org/flikore/validator"><img src="https://travis-ci.org/flikore/validator.png" alt="Build Status"></a>
<a href="https://coveralls.io/r/flikore/validator"><img src="https://coveralls.io/repos/flikore/validator/badge.png" alt="Coverage Status"></a></p>

<p>Flikore validator is a validation library for PHP aimed to be simple and extensible.</p>

<h2>
<a name="instalation" class="anchor" href="#instalation"><span class="octicon octicon-link"></span></a>Instalation</h2>

<ul>
<li>Clone this repository in a folder on your project:</li>
</ul><pre><code>git clone https://github.com/flikore/validator.git vendor/flikore/validator
</code></pre>

<ul>
<li>Include the <code>autoload.php</code> file in the bootstrap for your project:</li>
</ul><div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">require_once</span> <span class="s1">'vendor/flikore/validator/autoload.php'</span><span class="p">;</span>
</pre></div>

<p>An alternative is to create a submodule instead of cloning the repository. This way you don't need to push this library to your own repository and can also update it more easily:</p>

<pre><code>git submodule add https://github.com/flikore/validator.git vendor/flikore/validator
</code></pre>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h2>

<h3>
<a name="basic-value-validation" class="anchor" href="#basic-value-validation"><span class="octicon octicon-link"></span></a>Basic value validation</h3>

<div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">use</span> <span class="nx">Flikore\Validator\Validators</span> <span class="k">as</span> <span class="nx">v</span><span class="p">;</span>

<span class="c1">// Instantiate an existing validator</span>
<span class="nv">$v</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">v\ExactValueValidator</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>

<span class="c1">// Use the "validate" method to check if a value is valid</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$v</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span><span class="mi">5</span><span class="p">));</span>    <span class="c1">// bool(true)</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$v</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span><span class="mi">4</span><span class="p">));</span>    <span class="c1">// bool(false)</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$v</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>    <span class="c1">// bool(false)</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$v</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span><span class="k">null</span><span class="p">));</span> <span class="c1">// bool(true)</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$v</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span><span class="s1">''</span><span class="p">));</span>   <span class="c1">// bool(true)</span>
</pre></div>

<p>The validators ignores null values and empty strings. If you like to make sure a value is not empty, use the NotEmptyValidator.</p>

<div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">use</span> <span class="nx">Flikore\Validator\Validators</span> <span class="k">as</span> <span class="nx">v</span><span class="p">;</span>

<span class="nv">$v</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">v\NotEmptyValidator</span><span class="p">();</span>

<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$v</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span><span class="k">null</span><span class="p">));</span>    <span class="c1">// bool(false)</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$v</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span><span class="k">array</span><span class="p">()));</span> <span class="c1">// bool(false)</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$v</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span><span class="s1">''</span><span class="p">));</span>      <span class="c1">// bool(false)</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$v</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>       <span class="c1">// bool(true)</span>
</pre></div>

<h3>
<a name="multiple-validators" class="anchor" href="#multiple-validators"><span class="octicon octicon-link"></span></a>Multiple validators</h3>

<p>If you want to check if multiple conditions apply, use the <code>ValidatorCombo</code> class. It can join any number and validators and act as a validator itself (so it can also be use in other <code>ValidationCombo</code>).</p>

<div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">use</span> <span class="nx">Flikore\Validator\Validators</span> <span class="k">as</span> <span class="nx">v</span><span class="p">;</span>

<span class="nv">$combo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Flikore\Validator\ValidationCombo</span><span class="p">();</span>

<span class="nv">$combo</span><span class="o">-&gt;</span><span class="na">addValidator</span><span class="p">(</span><span class="k">new</span> <span class="nx">v\ExactLengthValidator</span><span class="p">(</span><span class="mi">5</span><span class="p">));</span>
<span class="nv">$combo</span><span class="o">-&gt;</span><span class="na">addValidator</span><span class="p">(</span><span class="k">new</span> <span class="nx">v\NotEmptyValidator</span><span class="p">());</span>

<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$combo</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span><span class="s1">'12345'</span><span class="p">));</span>  <span class="c1">// bool(true)</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$combo</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span><span class="s1">'1234'</span><span class="p">));</span>   <span class="c1">// bool(false)</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$combo</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span><span class="s1">'123456'</span><span class="p">));</span> <span class="c1">// bool(false)</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$combo</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span><span class="s1">''</span><span class="p">));</span>       <span class="c1">// bool(false)</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$combo</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span><span class="k">null</span><span class="p">));</span>     <span class="c1">// bool(false)</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$combo</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span><span class="s1">''</span><span class="p">));</span>       <span class="c1">// bool(false)</span>
</pre></div>

<h3>
<a name="usage-with-exceptions" class="anchor" href="#usage-with-exceptions"><span class="octicon octicon-link"></span></a>Usage with exceptions</h3>

<p>To throw an exception on a validation error, use the <code>assert</code> method instead of <code>validate</code>. It throws a <code>ValidationException</code> with a custom message for each validator.</p>

<div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">use</span> <span class="nx">Flikore\Validator\Validators</span> <span class="k">as</span> <span class="nx">v</span><span class="p">;</span>

<span class="nv">$v</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">v\ExactValueValidator</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>

<span class="c1">// Throws a ValidationException with the message:</span>
<span class="c1">// "The value must be exactly 5."</span>
<span class="nv">$v</span><span class="o">-&gt;</span><span class="na">assert</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
</pre></div>

<h4>
<a name="custom-messages" class="anchor" href="#custom-messages"><span class="octicon octicon-link"></span></a>Custom messages</h4>

<p>The message of the exception can be set on the validator using the method <code>setErrorMessage()</code>. If the validator is a Combo, then the message setted with this method will be the message shown to any validation error (to avoid this behavior, set the messages of the validators <em>inside</em> the combo).</p>

<p>Each validator has a set of values that can be used in the message. The value named <code>key</code> exists in all validator and defaults to <code>"value"</code>. Those keys replace the sequence <code>%key%</code> inside the message. To override a default value of a key, use the <code>addKeyValue</code> method (this can be used to set the <code>key</code> as the name of the form field, for example).</p>

<p><strong>Example</strong>:</p>

<div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">use</span> <span class="nx">Flikore\Validator\Validators</span> <span class="k">as</span> <span class="nx">v</span><span class="p">;</span>

<span class="nv">$v</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">v\ExactLengthValidator</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>

<span class="c1">// Setting a new message template</span>
<span class="nv">$v</span><span class="o">-&gt;</span><span class="na">setErrorMessage</span><span class="p">(</span><span class="s1">'The %key% is not %length% %c% long as it should be.'</span><span class="p">);</span>

<span class="c1">// Override the default key name</span>
<span class="nv">$v</span><span class="o">-&gt;</span><span class="na">addKeyValue</span><span class="p">(</span><span class="s1">'key'</span><span class="p">,</span> <span class="s1">'input'</span><span class="p">);</span>
<span class="c1">// Create a custom key</span>
<span class="nv">$v</span><span class="o">-&gt;</span><span class="na">addKeyValue</span><span class="p">(</span><span class="s1">'c'</span><span class="p">,</span> <span class="s1">'characters'</span><span class="p">);</span>

<span class="c1">// Captures the error</span>
<span class="k">try</span>
<span class="p">{</span>
    <span class="nv">$v</span><span class="o">-&gt;</span><span class="na">assert</span><span class="p">(</span><span class="s1">'Name'</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">catch</span> <span class="p">(</span><span class="nx">Flikore\Validator\Exception\ValidatorException</span> <span class="nv">$e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span> <span class="c1">// Shows "The input is not 5 characters long as it should be."</span>
<span class="p">}</span>
</pre></div>

<h3>
<a name="validating-arrays-and-objects" class="anchor" href="#validating-arrays-and-objects"><span class="octicon octicon-link"></span></a>Validating arrays and objects</h3>

<p>The <code>ValidationSet</code> class can be used as a shortcut to test all the values in an array or the properties of an object all at once. The usage is pretty straightforward:</p>

<div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">use</span> <span class="nx">Flikore\Validator\Validators</span> <span class="k">as</span> <span class="nx">v</span><span class="p">;</span>

<span class="nv">$set</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Flikore\Validator\ValidationSet</span><span class="p">();</span>

<span class="c1">// Add a single rule to a key</span>
<span class="nv">$set</span><span class="o">-&gt;</span><span class="na">addRule</span><span class="p">(</span><span class="s1">'name'</span><span class="p">,</span> <span class="k">new</span> <span class="nx">v\NotEmptyValidator</span><span class="p">());</span>
<span class="c1">// This rule is chained with the previous one, both must be valid</span>
<span class="nv">$set</span><span class="o">-&gt;</span><span class="na">addRule</span><span class="p">(</span><span class="s1">'name'</span><span class="p">,</span> <span class="k">new</span> <span class="nx">v\MinLengthValidator</span><span class="p">(</span><span class="mi">5</span><span class="p">));</span>

<span class="c1">// Multiple rules can be added at once with an array</span>
<span class="c1">// Those rules will be *added* to the "name" key, and will not exclude the others.</span>
<span class="nv">$set</span><span class="o">-&gt;</span><span class="na">addRules</span><span class="p">(</span><span class="s1">'name'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="k">new</span> <span class="nx">v\MaxLengthValidator</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span>
    <span class="k">new</span> <span class="nx">v\RegexValidator</span><span class="p">(</span><span class="s1">'/^[a-z ]+$/i'</span><span class="p">),</span>
<span class="p">));</span>

<span class="c1">// Just call validate (or assert) to check if it's ok</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$set</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'Cool Name'</span><span class="p">)));</span> <span class="c1">// bool(true)</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$set</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'aaa'</span><span class="p">)));</span>       <span class="c1">// bool(false) The minimum length is 5</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$set</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'aa4a5'</span><span class="p">)));</span>     <span class="c1">// bool(false) Doesn't match regex</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$set</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">)));</span>          <span class="c1">// bool(false) Can't be empty</span>

<span class="c1">// Another way is to construct the set with all the rules:</span>
<span class="c1">// ***Note: Even in this way, new rules can also be added later with the add methods.</span>
<span class="nv">$set</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Flikore\Validator\ValidationSet</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="k">new</span> <span class="nx">v\NotEmptyValidator</span><span class="p">(),</span>
        <span class="k">new</span> <span class="nx">v\MinLengthValidator</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
    <span class="p">),</span>
    <span class="s1">'age'</span>  <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">v\MinValueValidator</span><span class="p">(</span><span class="mi">13</span><span class="p">),</span>
<span class="p">));</span>

<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$set</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'this is ok'</span><span class="p">,</span> <span class="s1">'age'</span> <span class="o">=&gt;</span> <span class="mi">14</span><span class="p">)));</span> <span class="c1">// bool(true)</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$set</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'oops'</span><span class="p">,</span>       <span class="s1">'age'</span> <span class="o">=&gt;</span> <span class="mi">14</span><span class="p">)));</span> <span class="c1">// bool(false)</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$set</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'this is ok'</span><span class="p">,</span> <span class="s1">'age'</span> <span class="o">=&gt;</span> <span class="mi">12</span><span class="p">)));</span> <span class="c1">// bool(false)</span>
</pre></div>

<h4>
<a name="sets-and-exceptions" class="anchor" href="#sets-and-exceptions"><span class="octicon octicon-link"></span></a>Sets and exceptions</h4>

<p>With a <code>ValidationSet</code>, exception messages work in a different way. The main exception has no message attached, but it contains an array of errors with the keys being the validated array keys (or object properties) and the values being the child validator exception.</p>

<p>Also, the key name you add to the set is also setted as the <code>%key%</code> template value in the error messages. To change that to another value, use the third argument of <code>addRule</code> and <code>addRules</code> methods with the value you want). This can be used if you want to change the language of the message or to specify a more user friendly form label.</p>

<p><strong>Example</strong>:</p>

<div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">use</span> <span class="nx">Flikore\Validator\Validators</span> <span class="k">as</span> <span class="nx">v</span><span class="p">;</span>

<span class="nv">$set</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Flikore\Validator\ValidationSet</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">'user_name'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="k">new</span> <span class="nx">v\NotEmptyValidator</span><span class="p">(),</span>
        <span class="k">new</span> <span class="nx">v\MinLengthValidator</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
    <span class="p">),</span>
    <span class="s1">'user_age'</span>  <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">v\MinValueValidator</span><span class="p">(</span><span class="mi">13</span><span class="p">),</span>
        <span class="p">),</span> 
    <span class="c1">// Labels:</span>
    <span class="k">array</span><span class="p">(</span>
        <span class="s1">'user_name'</span> <span class="o">=&gt;</span> <span class="s1">'Name'</span><span class="p">,</span>
        <span class="s1">'user_age'</span>  <span class="o">=&gt;</span> <span class="s1">'Age'</span><span class="p">,</span>
<span class="p">));</span>

<span class="k">try</span>
<span class="p">{</span>
    <span class="nv">$set</span><span class="o">-&gt;</span><span class="na">assert</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'user_name'</span> <span class="o">=&gt;</span> <span class="s1">'oops'</span><span class="p">,</span> <span class="s1">'user_age'</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">));</span>
<span class="p">}</span>
<span class="k">catch</span> <span class="p">(</span><span class="nx">Flikore\Validator\Exception\ValidatorException</span> <span class="nv">$e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getErrors</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">echo</span> <span class="nv">$key</span> <span class="o">.</span> <span class="s1">': '</span> <span class="o">.</span> <span class="nv">$value</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">()</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// Output:</span>
    <span class="c1">// user_name: The Name must have at least 5 characters.</span>
    <span class="c1">// user_age: The Age must be equal or greater than 13.</span>
<span class="p">}</span>
</pre></div>

<h2>
<a name="available-validators" class="anchor" href="#available-validators"><span class="octicon octicon-link"></span></a>Available validators</h2>

<p>Currently, there are the following validator classes:</p>

<ul>
<li><code>DateValidator</code></li>
<li><code>ExactLengthValidator</code></li>
<li><code>ExactValueValidator</code></li>
<li><code>IntanceOfValidator</code></li>
<li><code>LengthBetweenValidator</code></li>
<li><code>MaxLengthValidator</code></li>
<li><code>MaxValueValidator</code></li>
<li><code>MinLengthValidator</code></li>
<li><code>MinValueValidator</code></li>
<li><code>NotEmptyValidator</code></li>
<li><code>RegexValidator</code></li>
</ul><h2>
<a name="reference" class="anchor" href="#reference"><span class="octicon octicon-link"></span></a>Reference</h2>

<p>The documentation reference for all classes (including the validators) can be found at <a href="http://flikore.github.io/validator/docs/index.html" title="http://flikore.github.io/validator/docs/index.html">http://flikore.github.io/validator/docs/index.html</a>.</p>
        </section>

        <footer>
          Validator is maintained by <a href="https://github.com/flikore">flikore</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

                  <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-48627703-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

      </div>
    </div>
  </body>
</html>